{"title":"vue-router中使用i18n来进行网页标题的国际化","date":"2022-12-29T19:39:12.000Z","date_formatted":{"ll":"2022年12月29日","L":"2022/12/29","MM-DD":"12-29"},"link":"Vue/vue-router-i18n-html-title","tags":["I18n","Vue Router"],"categories":["Vue"],"updated":"2023-06-12T07:41:26.493Z","content":"<p>思路很简单，在完成<code>vue-i18n</code>的安装后，第一次访问页面时候缓存默认语言，更改语言时，把当前语言缓存起来。在 i18n 中定义好不同语言的标题，然后在路由中引用作为 meta.title。在路由后置守卫中进行网页标题的修改。</p>\n<p>代码：</p>\n<p>首先完成 vue-i18n 配置：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createI18n &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue-i18n&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> zh <span class=\"keyword\">from</span> <span class=\"string\">&quot;./zh&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> en <span class=\"keyword\">from</span> <span class=\"string\">&quot;./en&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> i18n = <span class=\"title function_\">createI18n</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">legacy</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t<span class=\"attr\">locale</span>: <span class=\"string\">&quot;zh&quot;</span>, <span class=\"comment\">// 语言标识（缓存里面没有就用中文）</span></span><br><span class=\"line\">\t<span class=\"attr\">messages</span>: &#123;</span><br><span class=\"line\">\t\tzh,</span><br><span class=\"line\">\t\ten,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">if</span> (</span><br><span class=\"line\">\t<span class=\"variable language_\">window</span>.<span class=\"property\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;lang&quot;</span>) !== <span class=\"string\">&quot;zh&quot;</span> &amp;&amp;</span><br><span class=\"line\">\t<span class=\"variable language_\">window</span>.<span class=\"property\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;lang&quot;</span>) !== <span class=\"string\">&quot;en&quot;</span></span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">window</span>.<span class=\"property\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;lang&quot;</span>, <span class=\"string\">&quot;zh&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">i18n.<span class=\"property\">global</span>.<span class=\"property\">locale</span>.<span class=\"property\">value</span> = <span class=\"variable language_\">window</span>.<span class=\"property\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;lang&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> i18n</span><br></pre></td></tr></table></figure>\n<p>en.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">\t<span class=\"attr\">meg</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">language</span>: <span class=\"string\">&quot;中文&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">home</span>: <span class=\"string\">&quot;Home&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">category</span>: <span class=\"string\">&quot;Category&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">tags</span>: <span class=\"string\">&quot;Tags&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">test</span>: <span class=\"string\">&quot;Test&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">articles</span>: <span class=\"string\">&quot;Articles&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">album</span>: <span class=\"string\">&quot;Album&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">finNew</span>: <span class=\"string\">&quot;Latest Articles&quot;</span>,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>zh.js:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">\t<span class=\"attr\">meg</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">language</span>: <span class=\"string\">&quot;English&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">home</span>: <span class=\"string\">&quot;主页&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">category</span>: <span class=\"string\">&quot;分类&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">tags</span>: <span class=\"string\">&quot;标签&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">test</span>: <span class=\"string\">&quot;测试&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">articles</span>: <span class=\"string\">&quot;文章&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">album</span>: <span class=\"string\">&quot;相册&quot;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">finNew</span>: <span class=\"string\">&quot;最新文章&quot;</span>,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>router.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//路由中的定义方式</span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&#x27;home&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">component</span>: <span class=\"title class_\">HomeView</span>,</span><br><span class=\"line\">    <span class=\"attr\">meta</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">title</span>: i18n.<span class=\"property\">global</span>.<span class=\"title function_\">t</span>(<span class=\"string\">&#x27;meg.home&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">//...</span></span><br><span class=\"line\"><span class=\"comment\">//后置守卫</span></span><br><span class=\"line\">router.<span class=\"title function_\">afterEach</span>(<span class=\"function\">(<span class=\"params\">to, <span class=\"keyword\">from</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">document</span>.<span class=\"property\">title</span> = (i18n.<span class=\"property\">global</span>.<span class=\"property\">locale</span>.<span class=\"property\">value</span> === <span class=\"string\">&#x27;zh&#x27;</span>) ? <span class=\"string\">&#x27;Hibi 博客站&#x27;</span> : <span class=\"string\">&#x27;Hibi Blog&#x27;</span> + <span class=\"string\">&#x27;-&#x27;</span> + to.<span class=\"property\">meta</span>.<span class=\"property\">title</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n","prev":{"title":"Nginx部署刷新404","link":"Vue/nginx-404"},"next":{"title":"初识Vue3","link":"Vue/first-vue3"},"plink":"http://hibi.pages.dev/Vue/vue-router-i18n-html-title/","reading_time":"315 字约 2 分钟"}