{"title":"错误的v-deep弃用警告","date":"2023-05-12T12:35:23.000Z","date_formatted":{"ll":"2023年5月12日","L":"2023/05/12","MM-DD":"05-12"},"thumbnail":"https://cdn.jsdelivr.net/gh/hibichann/picgo@main/%E8%AD%A6%E5%91%8A.jpg","color":"#26303A","link":"2023/05/12/Incorrect-deep-deprecation-warning","tags":["SASS/SCSS","Vue3"],"categories":["CSS"],"updated":"2023-06-08T09:22:02.517Z","content":"<p>在 sass/scss 项目中</p>\n<p>注意到项目中经常会有关于<code>::v-deep</code>的弃用警告，但是项目里又搜不到<code>::v-deep</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/hibichann/picgo@main/%E8%AD%A6%E5%91%8A.jpg\" alt=\"警告\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/hibichann/picgo@main/%E6%B2%A1%E6%9C%89v-deep.jpg\" alt=\"没有::v-deep\" loading=\"lazy\" class=\"φbp\"></p>\n<p>然后也去查看了源码里关于这段报错的：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/hibichann/picgo@main/202305151015288.png\" alt=\"vdeep判断部分源码\" loading=\"lazy\" class=\"φbp\"></p>\n<p>打印 n.nodes：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/hibichann/picgo@main/202305151017431.png\" alt=\"n.nodes\" loading=\"lazy\" class=\"φbp\"></p>\n<p>依旧无果，最终在 vuejs 的 issue 中找到:</p>\n<p><a href=\"https://github.com/vuejs/core/issues/4745\" target=\"_blank\">Misleading deprecation warning about “::v-deep”, when “:deep” is used in a nested block with SASS</a></p>\n<p>实际上是:deep 使用错误，应该是</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:<span class=\"built_in\">deep</span>(.ClassName) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// more rules</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>而非</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:deep .ClassName &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// more rules</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>虽然后者也能工作，但是会错误地触发::v-deep 弃用警告</p>\n","prev":{"title":"solidity函数","link":"2023/05/29/solidity-func"},"next":{"title":"JS总能够保证对象顺序么","link":"2023/04/23/js-object-sort"},"plink":"http://hibi.pages.dev/2023/05/12/Incorrect-deep-deprecation-warning/","reading_time":"202 字约 1 分钟"}